<section [ngClass]="{'day': true, 'current-day': isToday}">

  <header class="date-header">
    <h2>{{dayName}}</h2>
    <h3>{{daySubtitle}}</h3>
  </header>

  <mat-spinner *ngIf="loading | async; else tasksList"></mat-spinner>

  <ng-template #tasksList>
    <div class="tasks-actions">
      <button mat-stroked-button (click)="promptAddTask()">Add Task</button>
      <!-- <button mat-icon-button>
        <mat-icon>done_all</mat-icon>
      </button> -->
    </div>

    <div class="add-task-card">
      <mat-card [hidden]="!(addingTask$ | async)">
        <mat-form-field class="add-task-field">
          <mat-label></mat-label>
          <input type="text" #addTaskInput autocomplete="off" placeholder="Enter task title" matInput
            [formControl]="newTaskControl" (keyup.enter)="leavePromptAddTask()" (blur)="leavePromptAddTask()">
        </mat-form-field>
      </mat-card>
    </div>

    <div id="{{dayUrl}}" class="tasks" sortablejs [sortablejsOptions]="options">

      <mat-card *ngFor="let task of tasks" class="mat-elevation-z2" matRipple (click)="openEditTakDialog(task)"
        [ngClass]="{'task-complete': task.complete}">
        <span class="task-title">{{task.title}}</span>
      </mat-card>
    </div>

  </ng-template>

</section>